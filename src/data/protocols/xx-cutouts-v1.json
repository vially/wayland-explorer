{
  "type": "protocol",
  "name": "xx_cutouts_unstable_v1",
  "copyright": {
    "type": "copyright",
    "text": "Copyright Â© 2026 Phosh.mobi e.V.\n\nPermission is hereby granted, free of charge, to any person obtaining a\ncopy of this software and associated documentation files (the \"Software\"),\nto deal in the Software without restriction, including without limitation\nthe rights to use, copy, modify, merge, publish, distribute, sublicense,\nand/or sell copies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice (including the next\nparagraph) shall be included in all copies or substantial portions of the\nSoftware.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\nTHE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\nDEALINGS IN THE SOFTWARE.\n\nWarning! The protocol described in this file is currently in the\nexperimental phase. Backwards incompatible major versions of the protocol\nare to be expected. Exposing this protocol without an opt-in mechanism is\ndiscouraged."
  },
  "description": {
    "type": "description",
    "text": "This protocol describes the areas of a toplevel that are cut out\nof the available surface area by hardware elements present in the\nphysical display. This allows clients to avoid placing user interface\nelements in those areas.\n\nTypical cutout areas are notches (i.e. embedding a camera) or\n\"waterfall\" display edges. In the case of a notch the compositor\nwould usually supply the bounding box of the notch or an\napproximation by multiple rectangles. Thus a single physical\nelement in the display can correspond to multiple cutout events in\nthe protocol.\n\nThe protocol currently supports xdg_toplevel surfaces but is meant\nto be extended to other surfaces (like layer surfaces) in the\nfuture.\n\nWarning! The protocol described in this file is experimental and\nbackward incompatible changes may be made. Backward compatible\nchanges may be added together with the corresponding interface\nversion bump. Backward incompatible changes can only be done by\ncreating a new major version of the extension.",
    "summary": "Protocol to describe cut out surface regions"
  },
  "interfaces": [
    {
      "type": "interface",
      "name": "xx_cutouts_manager_v1",
      "version": "1",
      "description": {
        "type": "description",
        "text": "This interface allows a compositor to announce support for\nsupplying cutout information to the client.",
        "summary": "Display cutouts area manager"
      },
      "requests": [
        {
          "type": "request",
          "name": "destroy",
          "requestType": "destructor",
          "description": {
            "type": "description",
            "text": "Using this request a client can tell the server that it is not\ngoing to use the xx_cutouts_manger object anymore.\n\nAny objects already created through this instance are not affected.",
            "summary": "destroy the xx_cutouts_manager object"
          },
          "args": []
        },
        {
          "type": "request",
          "name": "get_cutouts",
          "description": {
            "type": "description",
            "text": "This creates a new xx_cutouts object for the given\nsurface. The role of the surface must be xdg_toplevel\notherwise an invalid_role protocol error will be raised. Later\nversions of this protocol might allow for other surface roles.",
            "summary": "create a cutout notifier from a xdg toplevel"
          },
          "args": [
            {
              "type": "arg",
              "name": "id",
              "argType": "new_id",
              "interface": "xx_cutouts_v1"
            },
            {
              "type": "arg",
              "name": "surface",
              "argType": "object",
              "interface": "wl_surface",
              "protocol": "wayland"
            }
          ]
        }
      ],
      "events": [],
      "enums": [
        {
          "type": "enum",
          "name": "error",
          "bitfield": false,
          "entries": [
            {
              "type": "entry",
              "name": "invalid_role",
              "value": "0",
              "summary": "given wl_surface has incorrect role"
            },
            {
              "type": "entry",
              "name": "defunct_cutouts_object",
              "value": "1",
              "summary": "wl_surface or surface role was destroyed before the cutouts object"
            }
          ]
        }
      ]
    },
    {
      "type": "interface",
      "name": "xx_cutouts_v1",
      "version": "1",
      "description": {
        "type": "description",
        "text": "An xx_cutouts describes the areas currently \"cut out\" of a\ntoplevel.\n\nEach cutout event carries an id that identifies the\nphysical element. If the compositor describes an element by\nmultiple cutout events these should use the same element\nid. A typical example is a curved notch that is approximated\nby several cutout_box elements. Using the same element\nid allows the client to identify that these belong to the\nsame physical object. Ids are only valid during one configure\nsequence. No guarantee is given that the same id identifies\nthe same element in different configure sequences.\n\nTypically compositors would only send cutout information when\nthe toplevel enters fullscreen or maxmized state (as specified\nin the xdg_shell protocol).\n\nThe xx_cutouts_v1 object must be destroyed before its\nunderlying xdg_toplevel and wl_surface. Otherwise the\ndefunct_cutouts_object protocol error will be send.",
        "summary": "cutout regions information"
      },
      "requests": [
        {
          "type": "request",
          "name": "destroy",
          "requestType": "destructor",
          "description": {
            "type": "description",
            "text": "Using this request a client can tell the server that it is not\ngoing to use the xx_cutouts object anymore.",
            "summary": "destroy the xx_cutouts object"
          },
          "args": []
        },
        {
          "type": "request",
          "name": "set_unhandled",
          "description": {
            "type": "description",
            "text": "If a client doesn't handle one or more cutouts in the to be\nacked sequence, it can add their element's id to the\nunhandled array. The compositor might then try to reposition\nthe surface in a way that avoids these elements in a future\nconfigure sequence.\n\nThe request (if used) must be sent before acking the configure\nsequence. State set with this request is double-buffered. It\nwill get applied on the next ack_configure and stay valid\nuntil the next configure event.",
            "summary": "Notify about unhandled cutouts"
          },
          "args": [
            {
              "type": "arg",
              "name": "unhandled",
              "argType": "array",
              "summary": "array of unhandled element ids"
            }
          ]
        }
      ],
      "events": [
        {
          "type": "event",
          "name": "cutout_box",
          "description": {
            "type": "description",
            "text": "The cutout_box event describes a rectangular cutout area in\nsurface-local coordinates.\n\nThis can be an approximation of e.g. a circular camera notch.",
            "summary": "A rectangular cutout region"
          },
          "args": [
            {
              "type": "arg",
              "name": "x",
              "argType": "int",
              "summary": "x coordinate of the box's top left corner"
            },
            {
              "type": "arg",
              "name": "y",
              "argType": "int",
              "summary": "y coordinate of the box's top left corner"
            },
            {
              "type": "arg",
              "name": "width",
              "argType": "int"
            },
            {
              "type": "arg",
              "name": "height",
              "argType": "int"
            },
            {
              "type": "arg",
              "name": "type",
              "argType": "uint",
              "summary": "The type of cutout",
              "enum": "type"
            },
            {
              "type": "arg",
              "name": "id",
              "argType": "uint",
              "summary": "An identifier identifying the physical element"
            }
          ]
        },
        {
          "type": "event",
          "name": "cutout_corner",
          "description": {
            "type": "description",
            "text": "The cutout_corner event describes a rounded corner in\nsurface-local coordinates. The area towards the screen edge is\nthe cutout corner part.",
            "summary": "A cutout corner"
          },
          "args": [
            {
              "type": "arg",
              "name": "position",
              "argType": "uint",
              "summary": "The position of the described corner",
              "enum": "corner_position"
            },
            {
              "type": "arg",
              "name": "radius",
              "argType": "uint",
              "summary": "The corner's radius"
            },
            {
              "type": "arg",
              "name": "id",
              "argType": "uint",
              "summary": "An identifier identifying the physical element"
            }
          ]
        },
        {
          "type": "event",
          "name": "configure",
          "description": {
            "type": "description",
            "text": "The configure event marks the end of a configure sequence. A\nconfigure sequence is a set of zero or more cutout events and\nthe final xx_cutout.configure event.\n\nIn the case of a xdg_toplevel clients should arrange their\nsurface for the new cutouts, and then send an\nxdg_surface.ack_configure request at some point before\ncommitting the new surface. See xdg_surface.configure and\nxdg_surface.ack_configure in the xdg_shell protocol for\ndetails.\n\nIf the cutout sequence consists of only a configure event and\ncontains no cutout or corner events this indicates that the\nsurface isn't overlapping with any cutouts or corners.\n\nIf the client receives multiple configure events before it can\nrespond to one, it is free to discard all but the last event\nit received.",
            "summary": "notify cutout changes"
          },
          "args": []
        }
      ],
      "enums": [
        {
          "type": "enum",
          "name": "type",
          "bitfield": false,
          "description": {
            "type": "description",
            "text": "These values indicate the type of cutout. The information is\nmeant to help clients to decide whether they can possibly\nignore the element.",
            "summary": "Cutout type"
          },
          "entries": [
            {
              "type": "entry",
              "name": "cutout",
              "value": "0",
              "description": {
                "type": "description",
                "text": "This element type can be used by the compositor if it\ndoesn't want to provide a more specific type.",
                "summary": "A generic cutout"
              }
            },
            {
              "type": "entry",
              "name": "notch",
              "value": "1",
              "description": {
                "type": "description",
                "text": "A functional, irregular shape on one of the device's\nedges. It often contains a camera.",
                "summary": "Small functional cutout area"
              }
            },
            {
              "type": "entry",
              "name": "waterfall",
              "value": "2",
              "description": {
                "type": "description",
                "text": "A curved display edge intended to make the device appear\nlike not having any bezel.",
                "summary": "A curved display edge"
              }
            }
          ]
        },
        {
          "type": "enum",
          "name": "corner_position",
          "bitfield": false,
          "description": {
            "type": "description",
            "text": "The position of a corner on a surface",
            "summary": "Corner position"
          },
          "entries": [
            {
              "type": "entry",
              "name": "top_left",
              "value": "0"
            },
            {
              "type": "entry",
              "name": "top_right",
              "value": "1"
            },
            {
              "type": "entry",
              "name": "bottom_right",
              "value": "2"
            },
            {
              "type": "entry",
              "name": "bottom_left",
              "value": "3"
            }
          ]
        },
        {
          "type": "enum",
          "name": "error",
          "bitfield": false,
          "entries": [
            {
              "type": "entry",
              "name": "invalid_element_id",
              "value": "0",
              "summary": "Invalid element id in a set_unhandled request"
            }
          ]
        }
      ]
    }
  ]
}
